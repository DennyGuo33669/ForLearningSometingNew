# 3.4.5 Number类型

Number 类型使用**IEEE754**格式来表示整数和浮点数.为支持各种数值类型,ECMA-262定义了不同的数值字面量格式.

* *十进制* `var intNum = 55;`
* *八进制* `var octalNum = 055;` 八进制字面量在严格模式下是**无效**的,会抛出一个错误.
* *十六进制* `var hexNum = 0x55;`

在进行算术计算时,所有以八进制和十六进制表示的数值最终都会将被转换成**十进制**数值.

## 1.浮点数值

由于保存浮点数值需要的内存空间是保存整数值的**两倍**,因此 ECMAScript 会根据情况将浮点数转换为整数,列如:

```js .line-numbers
var floatNum1 = 1.; //小数点后面没有数字---解析为1
var floatNum2 = 10.0; //整数---解析为10
```

可以使用e表示极大或极小的数

```js .line-numbers
var floatNum = 3.125e7; //31250000
```

在默认情况下,ECMAScript 会将小数点后面带有6个零以上的浮点数值转换为以e表示法表示的数值(例如,0.0000003会被转换成**3e-7**);

浮点数值的最高精度是17位小数,但在进行算术计算时其精确度远远不如整数.例如,0.1+0.2的结果不是0.3,而是0.30000000000000004.这个小小的舍入误差会导致无法测试特定的浮点数值. 例如

```js .line-numbers
if (a + b == 0.3) { // 不要做这样的测试
  alert('You got 0.3');
}
```

在这个例子中,是测试a和b的值是不是等于0.3.如果a=0.05、b=0.25或者a=0.15、b=0.15都不会有问题.但是如果这两个数是0.1和0.2那么测试将无法通过.因此**永远**都不要测试某个特定的浮点值

## 2.数值范围

由于内存的限制,ECMAScript 并不能保存世界上所有的数值.

ECMAScript能够表示的最小数值保存在`Number.MIN_VALUE`中---在大多数浏览器中,这个值是**5e-324**;能够表示最大的书保存在`Number.MAX_VALUE`中---在大多数浏览器中,这个值是**1.7976931348623157e308**

如果某次计算的结果得到了一个超出JavaScript数值范围的值,那么这个数值奖杯自动转换成特殊的**Infinity**值,如果这个值是**负数**,则会被转换成**-Infinity(负无穷)** ,如果这个值是 **正数**,则会被转换成 **Infinity(正无穷)**.

如上所述,如果某次计算返回了正或负的Infinity值,那么该值将无法继续参与下一次的计算,因为Infinity不能够参与计算.要想确定一个数值是不是有穷,可以使用`isFinite()`函数这个函数在参数为有穷时会返回**true**,列如:

```js .line-numbers
var result = Number.MAX_VALUE + Number.MAX_VALUE;
alert(isFinite(result)); // false
```

## 3.NaN

NaN即**非数值(Not a Number)** ,这个数值用于表示一个本来要返回数值的操作数未返回数值的情况(这样就不会抛出错误了).

例如,在其他编程语言中,任何数值除以0都会导致错误,从而停止代码执行.但在ECMAScript中,任何数值除以0会返回NaN[^1],因此不会影响其他代码的执行.

[^1]:实际上只有0除以0才会返回NaN,正数除以0返回Infinity,负数除以0返回-Infinity.

NaN本身有**两个**非同寻常的特点,*首先*,任何涉及NaN的操作(例如 NaN/10)都会返回NaN,这个特点在多步计算中有可能导致问题.*其次*,NaN与任何值都不相等,包括NaN**本身**.例如下面的代码会返回false:

```js .line-numbers
alert(NaN == NaN); // false
```

正对NaN的这两个特点,ECMAScript定义了`isNaN()`函数.
这个函数接收一个参数,该参数可以是任何类型,而函数会帮我们确定这个参数是否为"NaN".`isNaN()`在接收一个值之后,会尝试将这个值转换为数值.某些不是数值的值会直接转换为数值,列如字符串"10"或Boolean值.而任何不能背转换为数值的值都会导致这个函数返回true,列如:

```js .line-numbers
alert(isNaN(NaN)); // true
alert(isNaN(10)); // false(10是一个数值)
alert(isNaN('10')); // false(可以被转换成数值10)
alert(isNaN('blue')); // true(不能转换成数值)
alert(isNaN(true)); // false(可以被转换成数值1)
```