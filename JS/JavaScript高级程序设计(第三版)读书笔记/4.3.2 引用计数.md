# 4.3.2 引用计数

另一种不太常见的垃圾收集策略叫做 **引用计数(reference counting)**

引用计数的含义是跟踪记录每个值被引用的次数.当声明了一个变量并将一个引用类型值赋给改变量时,则这个值的引用次数就是1.如果同一个值被赋给另一个变量,则该值的引用次数**加1**.相反,如果包含对这个值引用的变量又取得了另一个值,则这个值的引用次数**减1**.当这个值的引用次数变成0时,则说明没有办法再访问这个值了,因而就可以将其占用的内存空间回收回来.这样,当垃圾收集器下次再运行时,它就会释放那些引用次数为零的值所占用的内存.

引用计数有一个严重的问题 **循环引用** :对象A中包含一个指向对象B的指针,而对象B中也包含一个指向对象A引用.

``` js .line-numbers
function problem () {
  var objectA = {};
  var objectB = {};

  objectA.someOtherObject = objectB;
  objectB.anotherObject = objectA;
}
```

`objectA` `objectB`相互引用,使得他们的引用计数永远不为0,如果这个函数被重复多次的调用,会导致大量内存得不到回收.
